<html><head>
	<title>CORS-Bridge RPC example host</title>
	<link href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap" rel="stylesheet">
	<style>
		* { font-family: 'Open Sans', sans-serif; }
		h2 { margin: 0; padding: 0.3rem 0.6rem; background-color:coral; }
	</style>
	<script src='src/bridgehost.js'></script>
	<script>
		var holder
		BridgeHost.sign('greet', function(request) {
			console.log('greet:', request.data)
			holder = request
		})
	</script>
</head><body>
	<h2>Host</h2>
	<p>Broadcast event to clients:</p>
	<button onclick="BridgeHost.dispatch('hello')">EVENT</button>
	<button onclick="BridgeHost.dispatch('hello', 'world')">EVENT primitive</button>
	<button onclick="BridgeHost.dispatch('hello', {a:1, b:[], c:null, d:'str', e:undefined, f:NaN})">EVENT {object}</button>
	<br/>
	<p>Reply to client request:</p>
	<button onclick="holder.progress()">PROGRESS</button>
	<button onclick="holder.progress(0.5)">PROGRESS primitive</button>
	<button onclick="holder.progress({ current:32772, total:738283, module:'loader', state:'loading' })">PROGRESS {object}</button>
	<br/>
	<button onclick="holder.response()">RESPONSE</button>
	<button onclick="holder.response(true)">RESPONSE primitive</button>
	<button onclick="holder.response(null, true, {a:1, b:undefined, c:[5,6,7, false]}, 'bar')">RESPONSE ...rest</button>
	<br/>
	<button onclick="holder.error()">ERROR</button>
	<button onclick="holder.error(404)">ERROR primitive</button>
	<button onclick="holder.error({ code:123, message:'Wow! Such much'})">ERROR {object}</button>
	<hr/>
	<iframe id='client-frame-1' src='client.html' width='400px' height='220px'></iframe>
	<iframe id='client-frame-2' src='client.html' width='400px' height='220px'></iframe>
	<br/>
	<iframe id='client-frame-3' src='client.html' width='400px' height='220px'></iframe>
	<iframe id='client-frame-4' src='client.html' width='400px' height='220px'></iframe>
</body></html>